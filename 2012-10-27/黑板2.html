<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<script>
function createObj()
{
	if(!createObj._obj)
	{
		var obj=new Object();
		
		createObj._obj=obj;
	}
	else
	{
		return createObj._obj;
	}
	
	obj.datas=[];	//存东西
	obj.add=function (str)
	{
		this.datas.push(str);
	};
	obj.get=function ()
	{
		return this.datas;
	};
	
	return obj;
}

window.onload=function ()
{
	//1.注册
	(function (){
		var oTxt=document.getElementById('txt_add_user');
		var oPass=document.getElementById('txt_add_pass');
		var oBtn=document.getElementById('btn_add');
		
		oBtn.onclick=function ()
		{
			var obj=createObj();
			
			obj.add({user: oTxt.value, pass: oPass.value});
		};
	})();
	
	//2.ul列表
	(function (){
		var oUl=document.getElementById('ul1');
		
		setInterval(function (){
			var obj=createObj();
			var arr=obj.get();
			
			oUl.innerHTML='';
			
			for(var i=0;i<arr.length;i++)
			{
				var oLi=document.createElement('li');
				
				oLi.innerHTML=arr[i].user+','+arr[i].pass;
				
				oUl.appendChild(oLi);
			}
		}, 100);
	})();
	
	//3.text
	(function (){
		var oTxt=document.getElementById('txt1');
		
		setInterval(function (){
			var obj=createObj();
			
			oTxt.value=obj.get();
		}, 100);
	})();
};
</script>
</head>

<body>
<div id="div1">
<h2>用户注册</h2>
用户名：<input type="text" id="txt_add_user" /><br />
密码：<input type="password" id="txt_add_pass" /><br />
<input type="button" value="注册" id="btn_add" />
</div>
<ul id="ul1">
</ul>
<textarea id="txt1"></textarea>
</body>
</html>
